class ZCL_AOT_PROJECT_QUERY definition
  public
  create public .

public section.

  class-methods CREATE
    importing
      !IS_DATA type ZAOT_PROJECT_DATA .
  class-methods LIST
    returning
      value(RT_PROJECTS) type ZAOT_PROJECTS_TT .
protected section.
private section.
ENDCLASS.



CLASS ZCL_AOT_PROJECT_QUERY IMPLEMENTATION.


  METHOD create.

* todo: move to static on zcl_aot_Project?

    ASSERT NOT is_data-name IS INITIAL.
    ASSERT NOT is_data-devclass IS INITIAL.
    ASSERT NOT is_data-risk_level IS INITIAL.
    ASSERT NOT is_data-duration IS INITIAL.

    SELECT SINGLE * FROM tdevc INTO @DATA(ls_tdevc) WHERE devclass = @is_data-devclass.
    ASSERT sy-subrc = 0.

    DATA(ls_data) = CORRESPONDING zaot_projects( is_data ).

    TRY.
        ls_data-project = cl_system_uuid=>create_uuid_x16_static( ).
      CATCH cx_uuid_error.
        ASSERT 0 = 1.
    ENDTRY.

    INSERT zaot_projects FROM ls_data.
    ASSERT sy-subrc = 0.

  ENDMETHOD.


  METHOD list.

* todo: move to static on zcl_aot_Project?
* todo: NAME and DEVCLASS as optional range inputs, for restricting selection

    SELECT * FROM zaot_projects INTO TABLE rt_projects.

  ENDMETHOD.
ENDCLASS.
